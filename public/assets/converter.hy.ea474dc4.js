"use strict";(self.webpackChunkpixelplanet=self.webpackChunkpixelplanet||[]).push([[545],{865:(t,i,e)=>{e.r(i),e.d(i,{default:()=>ai});var s=e(7294),a=e(743),n=e(5823),r=e.n(n),h=Object.defineProperty,o=(t,i)=>{for(var e in i)h(t,e,{get:i[e],enumerable:!0})},m=(t,i,e)=>(((t,i,e)=>{i in t?h(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e})(t,"symbol"!=typeof i?i+"":i,e),e);o({},{bt709:()=>u});var u={};o(u,{Y:()=>l,x:()=>_,y:()=>c});var l=(t=>(t[t.RED=.2126]="RED",t[t.GREEN=.7152]="GREEN",t[t.BLUE=.0722]="BLUE",t[t.WHITE=1]="WHITE",t))(l||{}),_=(t=>(t[t.RED=.64]="RED",t[t.GREEN=.3]="GREEN",t[t.BLUE=.15]="BLUE",t[t.WHITE=.3127]="WHITE",t))(_||{}),c=(t=>(t[t.RED=.33]="RED",t[t.GREEN=.6]="GREEN",t[t.BLUE=.06]="BLUE",t[t.WHITE=.329]="WHITE",t))(c||{});function d(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}function g(t,i,e){return{x:.4124*(t=d(t/255))+.3576*(i=d(i/255))+.1805*(e=d(e/255)),y:.2126*t+.7152*i+.0722*e,z:.0193*t+.1192*i+.9505*e}}o({},{lab2rgb:()=>q,lab2xyz:()=>N,rgb2hsl:()=>k,rgb2lab:()=>C,rgb2xyz:()=>g,xyz2lab:()=>E,xyz2rgb:()=>T});var p={};function M(t){return t*(Math.PI/180)}function b(t,i,e){let s=t;return s<i&&(s=i),s<e&&(s=e),s}function f(t,i,e){let s=t;return s>i&&(s=i),s>e&&(s=e),s}function x(t,i,e){return t>e&&(t=e),t<i&&(t=i),0|t}function w(t){return(t=Math.round(t))>255?t=255:t<0&&(t=0),t}function y(t){return t>255?t=255:t<0&&(t=0),t}function S(t,i){const e=typeof t[0];let s;if("number"===e||"string"===e){const e=Object.create(null);for(let i=0,s=t.length;i<s;i++){const s=t[i];e[s]||0===e[s]||(e[s]=i)}s=t.sort(((t,s)=>i(t,s)||e[t]-e[s]))}else{const e=t.slice(0);s=t.sort(((t,s)=>i(t,s)||e.indexOf(t)-e.indexOf(s)))}return s}function k(t,i,e){const s=f(t,i,e),a=b(t,i,e),n=a-s,r=(s+a)/510;let h=0;r>0&&r<1&&(h=n/(r<.5?a+s:510-a-s));let o=0;return n>0&&(o=a===t?(i-e)/n:a===i?2+(e-t)/n:4+(t-i)/n,o*=60,o<0&&(o+=360)),{h:o,s:h,l:r}}o(p,{degrees2radians:()=>M,inRange0to255:()=>y,inRange0to255Rounded:()=>w,intInRange:()=>x,max3:()=>b,min3:()=>f,stableSort:()=>S});var v=.95047,A=1,B=1.08883;function z(t){return t>.008856?t**(1/3):7.787*t+16/116}function E(t,i,e){if(t=z(t/v),i=z(i/A),e=z(e/B),116*i-16<0)throw new Error("xxx");return{L:Math.max(0,116*i-16),a:500*(t-i),b:200*(i-e)}}function C(t,i,e){const s=g(t,i,e);return E(s.x,s.y,s.z)}var I=.95047,P=1,R=1.08883;function D(t){return t>.206893034?t**3:(t-16/116)/7.787}function N(t,i,e){const s=(t+16)/116,a=s-e/200;return{x:I*D(i/500+s),y:P*D(s),z:R*D(a)}}function G(t){return t>.0031308?1.055*t**(1/2.4)-.055:12.92*t}function T(t,i,e){const s=G(3.2406*t+-1.5372*i+-.4986*e),a=G(-.9689*t+1.8758*i+.0415*e),n=G(.0557*t+-.204*i+1.057*e);return{r:w(255*s),g:w(255*a),b:w(255*n)}}function q(t,i,e){const s=N(t,i,e);return T(s.x,s.y,s.z)}var H={};o(H,{AbstractDistanceCalculator:()=>L,AbstractEuclidean:()=>j,AbstractManhattan:()=>V,CIE94GraphicArts:()=>F,CIE94Textiles:()=>W,CIEDE2000:()=>O,CMetric:()=>K,Euclidean:()=>X,EuclideanBT709:()=>$,EuclideanBT709NoAlpha:()=>Y,Manhattan:()=>J,ManhattanBT709:()=>tt,ManhattanNommyde:()=>Z,PNGQuant:()=>it});var L=class{constructor(){m(this,"_maxDistance"),m(this,"_whitePoint"),this._setDefaults(),this.setWhitePoint(255,255,255,255)}setWhitePoint(t,i,e,s){this._whitePoint={r:t>0?255/t:0,g:i>0?255/i:0,b:e>0?255/e:0,a:s>0?255/s:0},this._maxDistance=this.calculateRaw(t,i,e,s,0,0,0,0)}calculateNormalized(t,i){return this.calculateRaw(t.r,t.g,t.b,t.a,i.r,i.g,i.b,i.a)/this._maxDistance}},U=class extends L{calculateRaw(t,i,e,s,a,n,r,h){const o=C(y(t*this._whitePoint.r),y(i*this._whitePoint.g),y(e*this._whitePoint.b)),m=C(y(a*this._whitePoint.r),y(n*this._whitePoint.g),y(r*this._whitePoint.b)),u=o.L-m.L,l=o.a-m.a,_=o.b-m.b,c=Math.sqrt(o.a*o.a+o.b*o.b),d=c-Math.sqrt(m.a*m.a+m.b*m.b);let g=l*l+_*_-d*d;g=g<0?0:Math.sqrt(g);const p=(h-s)*this._whitePoint.a*this._kA;return Math.sqrt((u/this._Kl)**2+(d/(1+this._K1*c))**2+(g/(1+this._K2*c))**2+p**2)}},W=class extends U{_setDefaults(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=12.5/255}},F=class extends U{_setDefaults(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=25/255}},Q=class extends L{_setDefaults(){}static _calculatehp(t,i){const e=Math.atan2(t,i);return e>=0?e:e+Q._deg360InRad}static _calculateRT(t,i){const e=i**7,s=2*Math.sqrt(e/(e+Q._pow25to7)),a=Q._deg30InRad*Math.exp(-(((t-Q._deg275InRad)/Q._deg25InRad)**2));return-Math.sin(2*a)*s}static _calculateT(t){return 1-.17*Math.cos(t-Q._deg30InRad)+.24*Math.cos(2*t)+.32*Math.cos(3*t+Q._deg6InRad)-.2*Math.cos(4*t-Q._deg63InRad)}static _calculate_ahp(t,i,e,s){const a=e+s;return 0===t?a:i<=Q._deg180InRad?a/2:a<Q._deg360InRad?(a+Q._deg360InRad)/2:(a-Q._deg360InRad)/2}static _calculate_dHp(t,i,e,s){let a;return a=0===t?0:i<=Q._deg180InRad?e-s:e<=s?e-s+Q._deg360InRad:e-s-Q._deg360InRad,2*Math.sqrt(t)*Math.sin(a/2)}calculateRaw(t,i,e,s,a,n,r,h){const o=C(y(t*this._whitePoint.r),y(i*this._whitePoint.g),y(e*this._whitePoint.b)),m=C(y(a*this._whitePoint.r),y(n*this._whitePoint.g),y(r*this._whitePoint.b)),u=(h-s)*this._whitePoint.a*Q._kA,l=this.calculateRawInLab(o,m);return Math.sqrt(l+u*u)}calculateRawInLab(t,i){const e=t.L,s=t.a,a=t.b,n=i.L,r=i.a,h=i.b,o=((Math.sqrt(s*s+a*a)+Math.sqrt(r*r+h*h))/2)**7,m=.5*(1-Math.sqrt(o/(o+Q._pow25to7))),u=(1+m)*s,l=(1+m)*r,_=Math.sqrt(u*u+a*a),c=Math.sqrt(l*l+h*h),d=_*c,g=Q._calculatehp(a,u),p=Q._calculatehp(h,l),M=Math.abs(g-p),b=n-e,f=c-_,x=Q._calculate_dHp(d,M,p,g),w=Q._calculate_ahp(d,M,g,p),y=(_+c)/2,S=((e+n)/2-50)**2,k=f/(1+.045*y),v=x/(1+.015*Q._calculateT(w)*y);return(b/(1+.015*S/Math.sqrt(20+S)))**2+k**2+v**2+Q._calculateRT(w,y)*k*v}},O=Q;m(O,"_kA",25/255),m(O,"_pow25to7",25**7),m(O,"_deg360InRad",M(360)),m(O,"_deg180InRad",M(180)),m(O,"_deg30InRad",M(30)),m(O,"_deg6InRad",M(6)),m(O,"_deg63InRad",M(63)),m(O,"_deg275InRad",M(275)),m(O,"_deg25InRad",M(25));var K=class extends L{calculateRaw(t,i,e,s,a,n,r,h){const o=(t+a)/2*this._whitePoint.r,m=(t-a)*this._whitePoint.r,u=(i-n)*this._whitePoint.g,l=(e-r)*this._whitePoint.b,_=((512+o)*m*m>>8)+4*u*u+((767-o)*l*l>>8),c=(h-s)*this._whitePoint.a;return Math.sqrt(_+c*c)}_setDefaults(){}},j=class extends L{calculateRaw(t,i,e,s,a,n,r,h){const o=a-t,m=n-i,u=r-e,l=h-s;return Math.sqrt(this._kR*o*o+this._kG*m*m+this._kB*u*u+this._kA*l*l)}},X=class extends j{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},$=class extends j{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},Y=class extends j{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=0}},V=class extends L{calculateRaw(t,i,e,s,a,n,r,h){let o=a-t,m=n-i,u=r-e,l=h-s;return o<0&&(o=0-o),m<0&&(m=0-m),u<0&&(u=0-u),l<0&&(l=0-l),this._kR*o+this._kG*m+this._kB*u+this._kA*l}},J=class extends V{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}},Z=class extends V{_setDefaults(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1}},tt=class extends V{_setDefaults(){this._kR=.2126,this._kG=.7152,this._kB=.0722,this._kA=1}},it=class extends L{calculateRaw(t,i,e,s,a,n,r,h){const o=(h-s)*this._whitePoint.a;return this._colordifferenceCh(t*this._whitePoint.r,a*this._whitePoint.r,o)+this._colordifferenceCh(i*this._whitePoint.g,n*this._whitePoint.g,o)+this._colordifferenceCh(e*this._whitePoint.b,r*this._whitePoint.b,o)}_colordifferenceCh(t,i,e){const s=t-i,a=s+e;return s*s+a*a}_setDefaults(){}};o({},{AbstractPaletteQuantizer:()=>et,ColorHistogram:()=>ft,NeuQuant:()=>dt,NeuQuantFloat:()=>Mt,RGBQuant:()=>wt,WuColorCube:()=>Bt,WuQuant:()=>Et});var et=class{quantizeSync(){for(const t of this.quantize())if(t.palette)return t.palette;throw new Error("unreachable")}},st=class{constructor(){m(this,"r"),m(this,"g"),m(this,"b"),m(this,"a"),m(this,"uint32"),m(this,"rgba"),this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}static createByQuadruplet(t){const i=new st;return i.r=0|t[0],i.g=0|t[1],i.b=0|t[2],i.a=0|t[3],i._loadUINT32(),i._loadQuadruplet(),i}static createByRGBA(t,i,e,s){const a=new st;return a.r=0|t,a.g=0|i,a.b=0|e,a.a=0|s,a._loadUINT32(),a._loadQuadruplet(),a}static createByUint32(t){const i=new st;return i.uint32=t>>>0,i._loadRGBA(),i._loadQuadruplet(),i}from(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this.uint32=t.uint32,this.rgba[0]=t.r,this.rgba[1]=t.g,this.rgba[2]=t.b,this.rgba[3]=t.a}getLuminosity(t){let i=this.r,e=this.g,s=this.b;return t&&(i=Math.min(255,255-this.a+this.a*i/255),e=Math.min(255,255-this.a+this.a*e/255),s=Math.min(255,255-this.a+this.a*s/255)),.2126*i+.7152*e+.0722*s}_loadUINT32(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0}_loadRGBA(){this.r=255&this.uint32,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255}_loadQuadruplet(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a}},at=class{constructor(){m(this,"_pointArray"),m(this,"_width"),m(this,"_height"),this._width=0,this._height=0,this._pointArray=[]}getWidth(){return this._width}getHeight(){return this._height}setWidth(t){this._width=t}setHeight(t){this._height=t}getPointArray(){return this._pointArray}clone(){const t=new at;t._width=this._width,t._height=this._height;for(let i=0,e=this._pointArray.length;i<e;i++)t._pointArray[i]=st.createByUint32(0|this._pointArray[i].uint32);return t}toUint32Array(){const t=this._pointArray.length,i=new Uint32Array(t);for(let e=0;e<t;e++)i[e]=this._pointArray[e].uint32;return i}toUint8Array(){return new Uint8Array(this.toUint32Array().buffer)}static fromHTMLImageElement(t){const i=t.naturalWidth,e=t.naturalHeight,s=document.createElement("canvas");return s.width=i,s.height=e,s.getContext("2d").drawImage(t,0,0,i,e,0,0,i,e),at.fromHTMLCanvasElement(s)}static fromHTMLCanvasElement(t){const i=t.width,e=t.height,s=t.getContext("2d").getImageData(0,0,i,e);return at.fromImageData(s)}static fromImageData(t){const i=t.width,e=t.height;return at.fromUint8Array(t.data,i,e)}static fromUint8Array(t,i,e){switch(Object.prototype.toString.call(t)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:t=new Uint8Array(t)}const s=new Uint32Array(t.buffer);return at.fromUint32Array(s,i,e)}static fromUint32Array(t,i,e){const s=new at;s._width=i,s._height=e;for(let i=0,e=t.length;i<e;i++)s._pointArray[i]=st.createByUint32(0|t[i]);return s}static fromBuffer(t,i,e){const s=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/Uint32Array.BYTES_PER_ELEMENT);return at.fromUint32Array(s,i,e)}};function nt(t,i){const e=360/i;for(let s=1,a=e-e/2;s<i;s++,a+=e)if(t>=a&&t<a+e)return s;return 0}var rt=class{constructor(){m(this,"_pointContainer"),m(this,"_pointArray",[]),m(this,"_i32idx",{}),this._pointContainer=new at,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}add(t){this._pointArray.push(t),this._pointContainer.setWidth(this._pointArray.length)}has(t){for(let i=this._pointArray.length-1;i>=0;i--)if(t.uint32===this._pointArray[i].uint32)return!0;return!1}getNearestColor(t,i){return this._pointArray[0|this._getNearestIndex(t,i)]}getPointContainer(){return this._pointContainer}_nearestPointFromCache(t){return"number"==typeof this._i32idx[t]?this._i32idx[t]:-1}_getNearestIndex(t,i){let e=this._nearestPointFromCache(""+i.uint32);if(e>=0)return e;let s=Number.MAX_VALUE;e=0;for(let a=0,n=this._pointArray.length;a<n;a++){const n=this._pointArray[a],r=t.calculateRaw(i.r,i.g,i.b,i.a,n.r,n.g,n.b,n.a);r<s&&(s=r,e=a)}return this._i32idx[i.uint32]=e,e}sort(){this._i32idx={},this._pointArray.sort(((t,i)=>{const e=k(t.r,t.g,t.b),s=k(i.r,i.g,i.b),a=t.r===t.g&&t.g===t.b?0:1+nt(e.h,10),n=(i.r===i.g&&i.g===i.b?0:1+nt(s.h,10))-a;if(n)return-n;const r=t.getLuminosity(!0),h=i.getLuminosity(!0);if(h-r!=0)return h-r;const o=(100*s.s|0)-(100*e.s|0);return o?-o:0}))}},ht={};o(ht,{HueStatistics:()=>mt,Palette:()=>rt,Point:()=>st,PointContainer:()=>at,ProgressTracker:()=>lt,arithmetic:()=>p});var ot=class{constructor(){m(this,"num",0),m(this,"cols",[])}},mt=class{constructor(t,i){m(this,"_numGroups"),m(this,"_minCols"),m(this,"_stats"),m(this,"_groupsFull"),this._numGroups=t,this._minCols=i,this._stats=[];for(let i=0;i<=t;i++)this._stats[i]=new ot;this._groupsFull=0}check(t){this._groupsFull===this._numGroups+1&&(this.check=()=>{});const i=255&t,e=t>>>8&255,s=t>>>16&255,a=i===e&&e===s?0:1+nt(k(i,e,s).h,this._numGroups),n=this._stats[a],r=this._minCols;n.num++,n.num>r||(n.num===r&&this._groupsFull++,n.num<=r&&this._stats[a].cols.push(t))}injectIntoDictionary(t){for(let i=0;i<=this._numGroups;i++)this._stats[i].num<=this._minCols&&this._stats[i].cols.forEach((i=>{t[i]?t[i]++:t[i]=1}))}injectIntoArray(t){for(let i=0;i<=this._numGroups;i++)this._stats[i].num<=this._minCols&&this._stats[i].cols.forEach((i=>{-1===t.indexOf(i)&&t.push(i)}))}},ut=class{constructor(t,i){m(this,"progress"),m(this,"_step"),m(this,"_range"),m(this,"_last"),m(this,"_progressRange"),this._range=t,this._progressRange=i,this._step=Math.max(1,this._range/(ut.steps+1)|0),this._last=-this._step,this.progress=0}shouldNotify(t){return t-this._last>=this._step&&(this._last=t,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0)}},lt=ut;m(lt,"steps",100);var _t=class{constructor(t){m(this,"r"),m(this,"g"),m(this,"b"),m(this,"a"),this.r=this.g=this.b=this.a=t}toPoint(){return st.createByRGBA(this.r>>3,this.g>>3,this.b>>3,this.a>>3)}subtract(t,i,e,s){this.r-=0|t,this.g-=0|i,this.b-=0|e,this.a-=0|s}},ct=class extends et{constructor(t,i=256){super(),m(this,"_pointArray"),m(this,"_networkSize"),m(this,"_network"),m(this,"_sampleFactor"),m(this,"_radPower"),m(this,"_freq"),m(this,"_bias"),m(this,"_distance"),this._distance=t,this._pointArray=[],this._sampleFactor=1,this._networkSize=i,this._distance.setWhitePoint(2040,2040,2040,2040)}sample(t){this._pointArray=this._pointArray.concat(t.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let t=0;t<this._networkSize;t++)this._network[t]=new _t((t<<11)/this._networkSize|0),this._freq[t]=ct._initialBias/this._networkSize|0,this._bias[t]=0}*_learn(){let t=this._sampleFactor;const i=this._pointArray.length;i<ct._minpicturebytes&&(t=1);const e=30+(t-1)/3|0,s=i/t|0;let a,n=s/ct._nCycles|0,r=ct._initAlpha,h=(this._networkSize>>3)*ct._radiusBias,o=h>>ct._radiusBiasShift;o<=1&&(o=0);for(let t=0;t<o;t++)this._radPower[t]=r*((o*o-t*t)*ct._radBias/(o*o))>>>0;a=i<ct._minpicturebytes?1:i%ct._prime1!=0?ct._prime1:i%ct._prime2!=0?ct._prime2:i%ct._prime3!=0?ct._prime3:ct._prime4;const m=new lt(s,99);for(let t=0,u=0;t<s;){m.shouldNotify(t)&&(yield{progress:m.progress});const s=this._pointArray[u],l=s.b<<3,_=s.g<<3,c=s.r<<3,d=s.a<<3,g=this._contest(l,_,c,d);if(this._alterSingle(r,g,l,_,c,d),0!==o&&this._alterNeighbour(o,g,l,_,c,d),u+=a,u>=i&&(u-=i),t++,0===n&&(n=1),t%n==0){r-=r/e|0,h-=h/ct._radiusDecrease|0,o=h>>ct._radiusBiasShift,o<=1&&(o=0);for(let t=0;t<o;t++)this._radPower[t]=r*((o*o-t*t)*ct._radBias/(o*o))>>>0}}}_buildPalette(){const t=new rt;return this._network.forEach((i=>{t.add(i.toPoint())})),t.sort(),t}_alterNeighbour(t,i,e,s,a,n){let r=i-t;r<-1&&(r=-1);let h=i+t;h>this._networkSize&&(h=this._networkSize);let o=i+1,m=i-1,u=1;for(;o<h||m>r;){const t=this._radPower[u++]/ct._alphaRadBias;if(o<h){const i=this._network[o++];i.subtract(t*(i.r-a),t*(i.g-s),t*(i.b-e),t*(i.a-n))}if(m>r){const i=this._network[m--];i.subtract(t*(i.r-a),t*(i.g-s),t*(i.b-e),t*(i.a-n))}}}_alterSingle(t,i,e,s,a,n){t/=ct._initAlpha;const r=this._network[i];r.subtract(t*(r.r-a),t*(r.g-s),t*(r.b-e),t*(r.a-n))}_contest(t,i,e,s){let a=~(1<<31),n=a,r=-1,h=r;for(let o=0;o<this._networkSize;o++){const m=this._network[o],u=8160*this._distance.calculateNormalized(m,{r:e,g:i,b:t,a:s})|0;u<a&&(a=u,r=o);const l=u-(this._bias[o]>>ct._initialBiasShift-3);l<n&&(n=l,h=o);const _=this._freq[o]>>ct._betaShift;this._freq[o]-=_,this._bias[o]+=_<<ct._gammaShift}return this._freq[r]+=ct._beta,this._bias[r]-=ct._betaGamma,h}},dt=ct;m(dt,"_prime1",499),m(dt,"_prime2",491),m(dt,"_prime3",487),m(dt,"_prime4",503),m(dt,"_minpicturebytes",ct._prime4),m(dt,"_nCycles",100),m(dt,"_initialBiasShift",16),m(dt,"_initialBias",1<<ct._initialBiasShift),m(dt,"_gammaShift",10),m(dt,"_betaShift",10),m(dt,"_beta",ct._initialBias>>ct._betaShift),m(dt,"_betaGamma",ct._initialBias<<ct._gammaShift-ct._betaShift),m(dt,"_radiusBiasShift",6),m(dt,"_radiusBias",1<<ct._radiusBiasShift),m(dt,"_radiusDecrease",30),m(dt,"_alphaBiasShift",10),m(dt,"_initAlpha",1<<ct._alphaBiasShift),m(dt,"_radBiasShift",8),m(dt,"_radBias",1<<ct._radBiasShift),m(dt,"_alphaRadBiasShift",ct._alphaBiasShift+ct._radBiasShift),m(dt,"_alphaRadBias",1<<ct._alphaRadBiasShift);var gt=class{constructor(t){m(this,"r"),m(this,"g"),m(this,"b"),m(this,"a"),this.r=this.g=this.b=this.a=t}toPoint(){return st.createByRGBA(this.r>>3,this.g>>3,this.b>>3,this.a>>3)}subtract(t,i,e,s){this.r-=t,this.g-=i,this.b-=e,this.a-=s}},pt=class extends et{constructor(t,i=256){super(),m(this,"_pointArray"),m(this,"_networkSize"),m(this,"_network"),m(this,"_sampleFactor"),m(this,"_radPower"),m(this,"_freq"),m(this,"_bias"),m(this,"_distance"),this._distance=t,this._pointArray=[],this._sampleFactor=1,this._networkSize=i,this._distance.setWhitePoint(2040,2040,2040,2040)}sample(t){this._pointArray=this._pointArray.concat(t.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let t=0;t<this._networkSize;t++)this._network[t]=new gt((t<<11)/this._networkSize),this._freq[t]=pt._initialBias/this._networkSize,this._bias[t]=0}*_learn(){let t=this._sampleFactor;const i=this._pointArray.length;i<pt._minpicturebytes&&(t=1);const e=30+(t-1)/3,s=i/t;let a,n=s/pt._nCycles|0,r=pt._initAlpha,h=(this._networkSize>>3)*pt._radiusBias,o=h>>pt._radiusBiasShift;o<=1&&(o=0);for(let t=0;t<o;t++)this._radPower[t]=r*((o*o-t*t)*pt._radBias/(o*o));a=i<pt._minpicturebytes?1:i%pt._prime1!=0?pt._prime1:i%pt._prime2!=0?pt._prime2:i%pt._prime3!=0?pt._prime3:pt._prime4;const m=new lt(s,99);for(let t=0,u=0;t<s;){m.shouldNotify(t)&&(yield{progress:m.progress});const s=this._pointArray[u],l=s.b<<3,_=s.g<<3,c=s.r<<3,d=s.a<<3,g=this._contest(l,_,c,d);if(this._alterSingle(r,g,l,_,c,d),0!==o&&this._alterNeighbour(o,g,l,_,c,d),u+=a,u>=i&&(u-=i),t++,0===n&&(n=1),t%n==0){r-=r/e,h-=h/pt._radiusDecrease,o=h>>pt._radiusBiasShift,o<=1&&(o=0);for(let t=0;t<o;t++)this._radPower[t]=r*((o*o-t*t)*pt._radBias/(o*o))}}}_buildPalette(){const t=new rt;return this._network.forEach((i=>{t.add(i.toPoint())})),t.sort(),t}_alterNeighbour(t,i,e,s,a,n){let r=i-t;r<-1&&(r=-1);let h=i+t;h>this._networkSize&&(h=this._networkSize);let o=i+1,m=i-1,u=1;for(;o<h||m>r;){const t=this._radPower[u++]/pt._alphaRadBias;if(o<h){const i=this._network[o++];i.subtract(t*(i.r-a),t*(i.g-s),t*(i.b-e),t*(i.a-n))}if(m>r){const i=this._network[m--];i.subtract(t*(i.r-a),t*(i.g-s),t*(i.b-e),t*(i.a-n))}}}_alterSingle(t,i,e,s,a,n){t/=pt._initAlpha;const r=this._network[i];r.subtract(t*(r.r-a),t*(r.g-s),t*(r.b-e),t*(r.a-n))}_contest(t,i,e,s){let a=~(1<<31),n=a,r=-1,h=r;for(let o=0;o<this._networkSize;o++){const m=this._network[o],u=8160*this._distance.calculateNormalized(m,{r:e,g:i,b:t,a:s});u<a&&(a=u,r=o);const l=u-(this._bias[o]>>pt._initialBiasShift-3);l<n&&(n=l,h=o);const _=this._freq[o]>>pt._betaShift;this._freq[o]-=_,this._bias[o]+=_<<pt._gammaShift}return this._freq[r]+=pt._beta,this._bias[r]-=pt._betaGamma,h}},Mt=pt;m(Mt,"_prime1",499),m(Mt,"_prime2",491),m(Mt,"_prime3",487),m(Mt,"_prime4",503),m(Mt,"_minpicturebytes",pt._prime4),m(Mt,"_nCycles",100),m(Mt,"_initialBiasShift",16),m(Mt,"_initialBias",1<<pt._initialBiasShift),m(Mt,"_gammaShift",10),m(Mt,"_betaShift",10),m(Mt,"_beta",pt._initialBias>>pt._betaShift),m(Mt,"_betaGamma",pt._initialBias<<pt._gammaShift-pt._betaShift),m(Mt,"_radiusBiasShift",6),m(Mt,"_radiusBias",1<<pt._radiusBiasShift),m(Mt,"_radiusDecrease",30),m(Mt,"_alphaBiasShift",10),m(Mt,"_initAlpha",1<<pt._alphaBiasShift),m(Mt,"_radBiasShift",8),m(Mt,"_radBias",1<<pt._radBiasShift),m(Mt,"_alphaRadBiasShift",pt._alphaBiasShift+pt._radBiasShift),m(Mt,"_alphaRadBias",1<<pt._alphaRadBiasShift);var bt=class{constructor(t,i){m(this,"_method"),m(this,"_hueStats"),m(this,"_histogram"),m(this,"_initColors"),m(this,"_minHueCols"),this._method=t,this._minHueCols=i<<2,this._initColors=i<<2,this._hueStats=new mt(bt._hueGroups,this._minHueCols),this._histogram=Object.create(null)}sample(t){switch(this._method){case 1:this._colorStats1D(t);break;case 2:this._colorStats2D(t)}}getImportanceSortedColorsIDXI32(){const t=S(Object.keys(this._histogram),((t,i)=>this._histogram[i]-this._histogram[t]));if(0===t.length)return[];let i;switch(this._method){case 1:const e=Math.min(t.length,this._initColors),s=t[e-1],a=this._histogram[s];i=t.slice(0,e);let n=e;const r=t.length;for(;n<r&&this._histogram[t[n]]===a;)i.push(t[n++]);this._hueStats.injectIntoArray(i);break;case 2:i=t;break;default:throw new Error("Incorrect method")}return i.map((t=>+t))}_colorStats1D(t){const i=this._histogram,e=t.getPointArray(),s=e.length;for(let t=0;t<s;t++){const s=e[t].uint32;this._hueStats.check(s),s in i?i[s]++:i[s]=1}}_colorStats2D(t){const i=t.getWidth(),e=t.getHeight(),s=t.getPointArray(),a=bt._boxSize[0],n=bt._boxSize[1],r=a*n,h=this._makeBoxes(i,e,a,n),o=this._histogram;h.forEach((t=>{let e=Math.round(t.w*t.h/r)*bt._boxPixels;e<2&&(e=2);const a={};this._iterateBox(t,i,(t=>{const i=s[t].uint32;this._hueStats.check(i),i in o?o[i]++:i in a?++a[i]>=e&&(o[i]=a[i]):a[i]=1}))})),this._hueStats.injectIntoDictionary(o)}_iterateBox(t,i,e){const s=t,a=s.y*i+s.x,n=(s.y+s.h-1)*i+(s.x+s.w-1),r=i-s.w+1;let h=0,o=a;do{e.call(this,o),o+=++h%s.w==0?r:1}while(o<=n)}_makeBoxes(t,i,e,s){const a=t%e,n=i%s,r=t-a,h=i-n,o=[];for(let m=0;m<i;m+=s)for(let i=0;i<t;i+=e)o.push({x:i,y:m,w:i===r?a:e,h:m===h?n:s});return o}},ft=bt;m(ft,"_boxSize",[64,64]),m(ft,"_boxPixels",2),m(ft,"_hueGroups",10);var xt=class{constructor(t,i,e){m(this,"index"),m(this,"color"),m(this,"distance"),this.index=t,this.color=i,this.distance=e}},wt=class extends et{constructor(t,i=256,e=2){super(),m(this,"_colors"),m(this,"_initialDistance"),m(this,"_distanceIncrement"),m(this,"_histogram"),m(this,"_distance"),this._distance=t,this._colors=i,this._histogram=new ft(e,i),this._initialDistance=.01,this._distanceIncrement=.005}sample(t){this._histogram.sample(t)}*quantize(){const t=this._histogram.getImportanceSortedColorsIDXI32();if(0===t.length)throw new Error("No colors in image");yield*this._buildPalette(t)}*_buildPalette(t){const i=new rt,e=i.getPointContainer().getPointArray(),s=new Array(t.length);for(let i=0;i<t.length;i++)e.push(st.createByUint32(t[i])),s[i]=1;const a=e.length,n=[];let r=a,h=this._initialDistance;const o=new lt(r-this._colors,99);for(;r>this._colors;){n.length=0;for(let t=0;t<a;t++){if(o.shouldNotify(a-r)&&(yield{progress:o.progress}),0===s[t])continue;const i=e[t];for(let o=t+1;o<a;o++){if(0===s[o])continue;const t=e[o],a=this._distance.calculateNormalized(i,t);a<h&&(n.push(new xt(o,t,a)),s[o]=0,r--)}}h+=r>3*this._colors?this._initialDistance:this._distanceIncrement}if(r<this._colors){S(n,((t,i)=>i.distance-t.distance));let t=0;for(;r<this._colors&&t<n.length;)s[n[t].index]=1,r++,t++}let m=e.length;for(let t=m-1;t>=0;t--)0===s[t]&&(t!==m-1&&(e[t]=e[m-1]),--m);e.length=m,i.sort(),yield{palette:i,progress:100}}};function yt(t){const i=[];for(let e=0;e<t;e++)i[e]=0;return i}function St(t,i,e,s){const a=new Array(t);for(let n=0;n<t;n++){a[n]=new Array(i);for(let t=0;t<i;t++){a[n][t]=new Array(e);for(let i=0;i<e;i++){a[n][t][i]=new Array(s);for(let e=0;e<s;e++)a[n][t][i][e]=0}}}return a}function kt(t,i,e){const s=new Array(t);for(let a=0;a<t;a++){s[a]=new Array(i);for(let t=0;t<i;t++){s[a][t]=new Array(e);for(let i=0;i<e;i++)s[a][t][i]=0}}return s}function vt(t,i,e,s,a){for(let n=0;n<i;n++){t[n]=[];for(let i=0;i<e;i++){t[n][i]=[];for(let e=0;e<s;e++)t[n][i][e]=a}}}function At(t,i,e){for(let s=0;s<i;s++)t[s]=e}var Bt=class{constructor(){m(this,"redMinimum"),m(this,"redMaximum"),m(this,"greenMinimum"),m(this,"greenMaximum"),m(this,"blueMinimum"),m(this,"blueMaximum"),m(this,"volume"),m(this,"alphaMinimum"),m(this,"alphaMaximum")}},zt=class extends et{constructor(t,i=256,e=5){super(),m(this,"_reds"),m(this,"_greens"),m(this,"_blues"),m(this,"_alphas"),m(this,"_sums"),m(this,"_weights"),m(this,"_momentsRed"),m(this,"_momentsGreen"),m(this,"_momentsBlue"),m(this,"_momentsAlpha"),m(this,"_moments"),m(this,"_table"),m(this,"_pixels"),m(this,"_cubes"),m(this,"_colors"),m(this,"_significantBitsPerChannel"),m(this,"_maxSideIndex"),m(this,"_alphaMaxSideIndex"),m(this,"_sideSize"),m(this,"_alphaSideSize"),m(this,"_distance"),this._distance=t,this._setQuality(e),this._initialize(i)}sample(t){const i=t.getPointArray();for(let t=0,e=i.length;t<e;t++)this._addColor(i[t]);this._pixels=this._pixels.concat(i)}*quantize(){yield*this._preparePalette();const t=new rt;for(let i=0;i<this._colors;i++)if(this._sums[i]>0){const e=this._sums[i],s=this._reds[i]/e,a=this._greens[i]/e,n=this._blues[i]/e,r=this._alphas[i]/e,h=st.createByRGBA(0|s,0|a,0|n,0|r);t.add(h)}t.sort(),yield{palette:t,progress:100}}*_preparePalette(){yield*this._calculateMoments();let t=0;const i=yt(this._colors);for(let e=1;e<this._colors;++e){this._cut(this._cubes[t],this._cubes[e])?(i[t]=this._cubes[t].volume>1?this._calculateVariance(this._cubes[t]):0,i[e]=this._cubes[e].volume>1?this._calculateVariance(this._cubes[e]):0):(i[t]=0,e--),t=0;let s=i[0];for(let a=1;a<=e;++a)i[a]>s&&(s=i[a],t=a);if(s<=0){this._colors=e+1;break}}const e=[],s=[],a=[],n=[];for(let t=0;t<this._colors;++t){const i=zt._volume(this._cubes[t],this._weights);i>0?(e[t]=zt._volume(this._cubes[t],this._momentsRed)/i|0,s[t]=zt._volume(this._cubes[t],this._momentsGreen)/i|0,a[t]=zt._volume(this._cubes[t],this._momentsBlue)/i|0,n[t]=zt._volume(this._cubes[t],this._momentsAlpha)/i|0):(e[t]=0,s[t]=0,a[t]=0,n[t]=0)}this._reds=yt(this._colors+1),this._greens=yt(this._colors+1),this._blues=yt(this._colors+1),this._alphas=yt(this._colors+1),this._sums=yt(this._colors+1);for(let t=0,i=this._pixels.length;t<i;t++){const i=this._pixels[t];let r=-1,h=Number.MAX_VALUE;for(let t=0;t<this._colors;t++){const o=e[t],m=s[t],u=a[t],l=n[t],_=this._distance.calculateRaw(o,m,u,l,i.r,i.g,i.b,i.a);_<h&&(h=_,r=t)}this._reds[r]+=i.r,this._greens[r]+=i.g,this._blues[r]+=i.b,this._alphas[r]+=i.a,this._sums[r]++}}_addColor(t){const i=8-this._significantBitsPerChannel,e=1+(t.r>>i),s=1+(t.g>>i),a=1+(t.b>>i),n=1+(t.a>>i);this._weights[n][e][s][a]++,this._momentsRed[n][e][s][a]+=t.r,this._momentsGreen[n][e][s][a]+=t.g,this._momentsBlue[n][e][s][a]+=t.b,this._momentsAlpha[n][e][s][a]+=t.a,this._moments[n][e][s][a]+=this._table[t.r]+this._table[t.g]+this._table[t.b]+this._table[t.a]}*_calculateMoments(){const t=[],i=[],e=[],s=[],a=[],n=[],r=kt(this._sideSize,this._sideSize,this._sideSize),h=kt(this._sideSize,this._sideSize,this._sideSize),o=kt(this._sideSize,this._sideSize,this._sideSize),m=kt(this._sideSize,this._sideSize,this._sideSize),u=kt(this._sideSize,this._sideSize,this._sideSize),l=kt(this._sideSize,this._sideSize,this._sideSize);let _=0;const c=new lt(this._alphaMaxSideIndex*this._maxSideIndex,99);for(let d=1;d<=this._alphaMaxSideIndex;++d){vt(r,this._sideSize,this._sideSize,this._sideSize,0),vt(h,this._sideSize,this._sideSize,this._sideSize,0),vt(o,this._sideSize,this._sideSize,this._sideSize,0),vt(m,this._sideSize,this._sideSize,this._sideSize,0),vt(u,this._sideSize,this._sideSize,this._sideSize,0),vt(l,this._sideSize,this._sideSize,this._sideSize,0);for(let g=1;g<=this._maxSideIndex;++g,++_){c.shouldNotify(_)&&(yield{progress:c.progress}),At(t,this._sideSize,0),At(i,this._sideSize,0),At(e,this._sideSize,0),At(s,this._sideSize,0),At(a,this._sideSize,0),At(n,this._sideSize,0);for(let _=1;_<=this._maxSideIndex;++_){let c=0,p=0,M=0,b=0,f=0,x=0;for(let w=1;w<=this._maxSideIndex;++w)c+=this._weights[d][g][_][w],p+=this._momentsRed[d][g][_][w],M+=this._momentsGreen[d][g][_][w],b+=this._momentsBlue[d][g][_][w],f+=this._momentsAlpha[d][g][_][w],x+=this._moments[d][g][_][w],t[w]+=c,i[w]+=p,e[w]+=M,s[w]+=b,a[w]+=f,n[w]+=x,r[g][_][w]=r[g-1][_][w]+t[w],h[g][_][w]=h[g-1][_][w]+i[w],o[g][_][w]=o[g-1][_][w]+e[w],m[g][_][w]=m[g-1][_][w]+s[w],u[g][_][w]=u[g-1][_][w]+a[w],l[g][_][w]=l[g-1][_][w]+n[w],this._weights[d][g][_][w]=this._weights[d-1][g][_][w]+r[g][_][w],this._momentsRed[d][g][_][w]=this._momentsRed[d-1][g][_][w]+h[g][_][w],this._momentsGreen[d][g][_][w]=this._momentsGreen[d-1][g][_][w]+o[g][_][w],this._momentsBlue[d][g][_][w]=this._momentsBlue[d-1][g][_][w]+m[g][_][w],this._momentsAlpha[d][g][_][w]=this._momentsAlpha[d-1][g][_][w]+u[g][_][w],this._moments[d][g][_][w]=this._moments[d-1][g][_][w]+l[g][_][w]}}}}static _volumeFloat(t,i){return i[t.alphaMaximum][t.redMaximum][t.greenMaximum][t.blueMaximum]-i[t.alphaMaximum][t.redMaximum][t.greenMinimum][t.blueMaximum]-i[t.alphaMaximum][t.redMinimum][t.greenMaximum][t.blueMaximum]+i[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMaximum]-i[t.alphaMinimum][t.redMaximum][t.greenMaximum][t.blueMaximum]+i[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMaximum]+i[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMaximum]-i[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMaximum]-(i[t.alphaMaximum][t.redMaximum][t.greenMaximum][t.blueMinimum]-i[t.alphaMinimum][t.redMaximum][t.greenMaximum][t.blueMinimum]-i[t.alphaMaximum][t.redMaximum][t.greenMinimum][t.blueMinimum]+i[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMinimum]-i[t.alphaMaximum][t.redMinimum][t.greenMaximum][t.blueMinimum]+i[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMinimum]+i[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMinimum]-i[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMinimum])}static _volume(t,i){return 0|zt._volumeFloat(t,i)}static _top(t,i,e,s){let a;switch(i){case zt._alpha:a=s[e][t.redMaximum][t.greenMaximum][t.blueMaximum]-s[e][t.redMaximum][t.greenMinimum][t.blueMaximum]-s[e][t.redMinimum][t.greenMaximum][t.blueMaximum]+s[e][t.redMinimum][t.greenMinimum][t.blueMaximum]-(s[e][t.redMaximum][t.greenMaximum][t.blueMinimum]-s[e][t.redMaximum][t.greenMinimum][t.blueMinimum]-s[e][t.redMinimum][t.greenMaximum][t.blueMinimum]+s[e][t.redMinimum][t.greenMinimum][t.blueMinimum]);break;case zt._red:a=s[t.alphaMaximum][e][t.greenMaximum][t.blueMaximum]-s[t.alphaMaximum][e][t.greenMinimum][t.blueMaximum]-s[t.alphaMinimum][e][t.greenMaximum][t.blueMaximum]+s[t.alphaMinimum][e][t.greenMinimum][t.blueMaximum]-(s[t.alphaMaximum][e][t.greenMaximum][t.blueMinimum]-s[t.alphaMaximum][e][t.greenMinimum][t.blueMinimum]-s[t.alphaMinimum][e][t.greenMaximum][t.blueMinimum]+s[t.alphaMinimum][e][t.greenMinimum][t.blueMinimum]);break;case zt._green:a=s[t.alphaMaximum][t.redMaximum][e][t.blueMaximum]-s[t.alphaMaximum][t.redMinimum][e][t.blueMaximum]-s[t.alphaMinimum][t.redMaximum][e][t.blueMaximum]+s[t.alphaMinimum][t.redMinimum][e][t.blueMaximum]-(s[t.alphaMaximum][t.redMaximum][e][t.blueMinimum]-s[t.alphaMaximum][t.redMinimum][e][t.blueMinimum]-s[t.alphaMinimum][t.redMaximum][e][t.blueMinimum]+s[t.alphaMinimum][t.redMinimum][e][t.blueMinimum]);break;case zt._blue:a=s[t.alphaMaximum][t.redMaximum][t.greenMaximum][e]-s[t.alphaMaximum][t.redMaximum][t.greenMinimum][e]-s[t.alphaMaximum][t.redMinimum][t.greenMaximum][e]+s[t.alphaMaximum][t.redMinimum][t.greenMinimum][e]-(s[t.alphaMinimum][t.redMaximum][t.greenMaximum][e]-s[t.alphaMinimum][t.redMaximum][t.greenMinimum][e]-s[t.alphaMinimum][t.redMinimum][t.greenMaximum][e]+s[t.alphaMinimum][t.redMinimum][t.greenMinimum][e]);break;default:throw new Error("impossible")}return 0|a}static _bottom(t,i,e){switch(i){case zt._alpha:return-e[t.alphaMinimum][t.redMaximum][t.greenMaximum][t.blueMaximum]+e[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMaximum]+e[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMaximum]-e[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMaximum]-(-e[t.alphaMinimum][t.redMaximum][t.greenMaximum][t.blueMinimum]+e[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMinimum]+e[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMinimum]-e[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMinimum]);case zt._red:return-e[t.alphaMaximum][t.redMinimum][t.greenMaximum][t.blueMaximum]+e[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMaximum]+e[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMaximum]-e[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMaximum]-(-e[t.alphaMaximum][t.redMinimum][t.greenMaximum][t.blueMinimum]+e[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMinimum]+e[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMinimum]-e[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMinimum]);case zt._green:return-e[t.alphaMaximum][t.redMaximum][t.greenMinimum][t.blueMaximum]+e[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMaximum]+e[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMaximum]-e[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMaximum]-(-e[t.alphaMaximum][t.redMaximum][t.greenMinimum][t.blueMinimum]+e[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMinimum]+e[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMinimum]-e[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMinimum]);case zt._blue:return-e[t.alphaMaximum][t.redMaximum][t.greenMaximum][t.blueMinimum]+e[t.alphaMaximum][t.redMaximum][t.greenMinimum][t.blueMinimum]+e[t.alphaMaximum][t.redMinimum][t.greenMaximum][t.blueMinimum]-e[t.alphaMaximum][t.redMinimum][t.greenMinimum][t.blueMinimum]-(-e[t.alphaMinimum][t.redMaximum][t.greenMaximum][t.blueMinimum]+e[t.alphaMinimum][t.redMaximum][t.greenMinimum][t.blueMinimum]+e[t.alphaMinimum][t.redMinimum][t.greenMaximum][t.blueMinimum]-e[t.alphaMinimum][t.redMinimum][t.greenMinimum][t.blueMinimum]);default:return 0}}_calculateVariance(t){const i=zt._volume(t,this._momentsRed),e=zt._volume(t,this._momentsGreen),s=zt._volume(t,this._momentsBlue),a=zt._volume(t,this._momentsAlpha);return zt._volumeFloat(t,this._moments)-(i*i+e*e+s*s+a*a)/zt._volume(t,this._weights)}_maximize(t,i,e,s,a,n,r,h,o){const m=0|zt._bottom(t,i,this._momentsRed),u=0|zt._bottom(t,i,this._momentsGreen),l=0|zt._bottom(t,i,this._momentsBlue),_=0|zt._bottom(t,i,this._momentsAlpha),c=0|zt._bottom(t,i,this._weights);let d=0,g=-1;for(let p=e;p<s;++p){let e=m+zt._top(t,i,p,this._momentsRed),s=u+zt._top(t,i,p,this._momentsGreen),M=l+zt._top(t,i,p,this._momentsBlue),b=_+zt._top(t,i,p,this._momentsAlpha),f=c+zt._top(t,i,p,this._weights);if(0!==f){let t=e*e+s*s+M*M+b*b,i=t/f;e=a-e,s=n-s,M=r-M,b=h-b,f=o-f,0!==f&&(t=e*e+s*s+M*M+b*b,i+=t/f,i>d&&(d=i,g=p))}}return{max:d,position:g}}_cut(t,i){let e;const s=zt._volume(t,this._momentsRed),a=zt._volume(t,this._momentsGreen),n=zt._volume(t,this._momentsBlue),r=zt._volume(t,this._momentsAlpha),h=zt._volume(t,this._weights),o=this._maximize(t,zt._red,t.redMinimum+1,t.redMaximum,s,a,n,r,h),m=this._maximize(t,zt._green,t.greenMinimum+1,t.greenMaximum,s,a,n,r,h),u=this._maximize(t,zt._blue,t.blueMinimum+1,t.blueMaximum,s,a,n,r,h),l=this._maximize(t,zt._alpha,t.alphaMinimum+1,t.alphaMaximum,s,a,n,r,h);if(l.max>=o.max&&l.max>=m.max&&l.max>=u.max){if(e=zt._alpha,l.position<0)return!1}else e=o.max>=l.max&&o.max>=m.max&&o.max>=u.max?zt._red:m.max>=l.max&&m.max>=o.max&&m.max>=u.max?zt._green:zt._blue;switch(i.redMaximum=t.redMaximum,i.greenMaximum=t.greenMaximum,i.blueMaximum=t.blueMaximum,i.alphaMaximum=t.alphaMaximum,e){case zt._red:i.redMinimum=t.redMaximum=o.position,i.greenMinimum=t.greenMinimum,i.blueMinimum=t.blueMinimum,i.alphaMinimum=t.alphaMinimum;break;case zt._green:i.greenMinimum=t.greenMaximum=m.position,i.redMinimum=t.redMinimum,i.blueMinimum=t.blueMinimum,i.alphaMinimum=t.alphaMinimum;break;case zt._blue:i.blueMinimum=t.blueMaximum=u.position,i.redMinimum=t.redMinimum,i.greenMinimum=t.greenMinimum,i.alphaMinimum=t.alphaMinimum;break;case zt._alpha:i.alphaMinimum=t.alphaMaximum=l.position,i.blueMinimum=t.blueMinimum,i.redMinimum=t.redMinimum,i.greenMinimum=t.greenMinimum}return t.volume=(t.redMaximum-t.redMinimum)*(t.greenMaximum-t.greenMinimum)*(t.blueMaximum-t.blueMinimum)*(t.alphaMaximum-t.alphaMinimum),i.volume=(i.redMaximum-i.redMinimum)*(i.greenMaximum-i.greenMinimum)*(i.blueMaximum-i.blueMinimum)*(i.alphaMaximum-i.alphaMinimum),!0}_initialize(t){this._colors=t,this._cubes=[];for(let i=0;i<t;i++)this._cubes[i]=new Bt;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=St(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=St(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=St(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=St(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=St(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=St(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(let t=0;t<256;++t)this._table[t]=t*t;this._pixels=[]}_setQuality(t=5){this._significantBitsPerChannel=t,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1}},Et=zt;m(Et,"_alpha",3),m(Et,"_red",2),m(Et,"_green",1),m(Et,"_blue",0);var Ct={};o(Ct,{AbstractImageQuantizer:()=>It,ErrorDiffusionArray:()=>Dt,ErrorDiffusionArrayKernel:()=>Rt,ErrorDiffusionRiemersma:()=>qt,NearestColor:()=>Pt});var It=class{quantizeSync(t,i){for(const e of this.quantize(t,i))if(e.pointContainer)return e.pointContainer;throw new Error("unreachable")}},Pt=class extends It{constructor(t){super(),m(this,"_distance"),this._distance=t}*quantize(t,i){const e=t.getPointArray(),s=t.getWidth(),a=t.getHeight(),n=new lt(a,99);for(let t=0;t<a;t++){n.shouldNotify(t)&&(yield{progress:n.progress});for(let a=0,n=t*s;a<s;a++,n++){const t=e[n];t.from(i.getNearestColor(this._distance,t))}}yield{pointContainer:t,progress:100}}},Rt=(t=>(t[t.FloydSteinberg=0]="FloydSteinberg",t[t.FalseFloydSteinberg=1]="FalseFloydSteinberg",t[t.Stucki=2]="Stucki",t[t.Atkinson=3]="Atkinson",t[t.Jarvis=4]="Jarvis",t[t.Burkes=5]="Burkes",t[t.Sierra=6]="Sierra",t[t.TwoSierra=7]="TwoSierra",t[t.SierraLite=8]="SierraLite",t))(Rt||{}),Dt=class extends It{constructor(t,i,e=!0,s=0,a=!1){super(),m(this,"_minColorDistance"),m(this,"_serpentine"),m(this,"_kernel"),m(this,"_calculateErrorLikeGIMP"),m(this,"_distance"),this._setKernel(i),this._distance=t,this._minColorDistance=s,this._serpentine=e,this._calculateErrorLikeGIMP=a}*quantize(t,i){const e=t.getPointArray(),s=new st,a=t.getWidth(),n=t.getHeight(),r=[];let h=1,o=1;for(const t of this._kernel){const i=t[2]+1;o<i&&(o=i)}for(let t=0;t<o;t++)this._fillErrorLine(r[t]=[],a);const m=new lt(n,99);for(let t=0;t<n;t++){m.shouldNotify(t)&&(yield{progress:m.progress}),this._serpentine&&(h*=-1);const o=t*a,u=1===h?0:a-1,l=1===h?a:-1;this._fillErrorLine(r[0],a),r.push(r.shift());const _=r[0];for(let m=u,c=o+u;m!==l;m+=h,c+=h){const o=e[c],u=_[m];s.from(o);const l=st.createByRGBA(w(o.r+u[0]),w(o.g+u[1]),w(o.b+u[2]),w(o.a+u[3])),d=i.getNearestColor(this._distance,l);if(o.from(d),this._minColorDistance&&this._distance.calculateNormalized(s,d)<this._minColorDistance)continue;let g,p,M,b;this._calculateErrorLikeGIMP?(g=l.r-d.r,p=l.g-d.g,M=l.b-d.b,b=l.a-d.a):(g=s.r-d.r,p=s.g-d.g,M=s.b-d.b,b=s.a-d.a);const f=1===h?0:this._kernel.length-1,x=1===h?this._kernel.length:-1;for(let i=f;i!==x;i+=h){const e=this._kernel[i][1]*h,s=this._kernel[i][2];if(e+m>=0&&e+m<a&&s+t>=0&&s+t<n){const t=this._kernel[i][0],a=r[s][e+m];a[0]+=g*t,a[1]+=p*t,a[2]+=M*t,a[3]+=b*t}}}}yield{pointContainer:t,progress:100}}_fillErrorLine(t,i){t.length>i&&(t.length=i);const e=t.length;for(let i=0;i<e;i++){const e=t[i];e[0]=e[1]=e[2]=e[3]=0}for(let s=e;s<i;s++)t[s]=[0,0,0,0]}_setKernel(t){switch(t){case 0:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case 1:this._kernel=[[3/8,1,0],[3/8,0,1],[2/8,1,1]];break;case 2:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case 3:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case 4:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case 5:this._kernel=[[.25,1,0],[4/32,2,0],[2/32,-2,1],[4/32,-1,1],[.25,0,1],[4/32,1,1],[2/32,2,1]];break;case 6:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[4/32,-1,1],[5/32,0,1],[4/32,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case 7:this._kernel=[[.25,1,0],[3/16,2,0],[1/16,-2,1],[2/16,-1,1],[3/16,0,1],[2/16,1,1],[1/16,2,1]];break;case 8:this._kernel=[[.5,1,0],[1/4,-1,1],[1/4,0,1]];break;default:throw new Error(`ErrorDiffusionArray: unknown kernel = ${t}`)}}};function*Nt(t,i,e){const s=Math.max(t,i),a={width:t,height:i,level:Math.floor(Math.log(s)/Math.log(2)+1),callback:e,tracker:new lt(t*i,99),index:0,x:0,y:0};yield*Gt(a,1),Tt(a,0)}function*Gt(t,i){if(!(t.level<1)){switch(t.tracker.shouldNotify(t.index)&&(yield{progress:t.tracker.progress}),t.level--,i){case 2:yield*Gt(t,1),Tt(t,3),yield*Gt(t,2),Tt(t,4),yield*Gt(t,2),Tt(t,2),yield*Gt(t,4);break;case 3:yield*Gt(t,4),Tt(t,2),yield*Gt(t,3),Tt(t,1),yield*Gt(t,3),Tt(t,3),yield*Gt(t,1);break;case 1:yield*Gt(t,2),Tt(t,4),yield*Gt(t,1),Tt(t,3),yield*Gt(t,1),Tt(t,1),yield*Gt(t,3);break;case 4:yield*Gt(t,3),Tt(t,1),yield*Gt(t,4),Tt(t,2),yield*Gt(t,4),Tt(t,4),yield*Gt(t,2)}t.level++}}function Tt(t,i){switch(t.x>=0&&t.x<t.width&&t.y>=0&&t.y<t.height&&(t.callback(t.x,t.y),t.index++),i){case 2:t.x--;break;case 3:t.x++;break;case 1:t.y--;break;case 4:t.y++}}var qt=class extends It{constructor(t,i=16,e=1){super(),m(this,"_distance"),m(this,"_weights"),m(this,"_errorQueueSize"),this._distance=t,this._errorQueueSize=i,this._weights=qt._createWeights(e,i)}*quantize(t,i){const e=t.getPointArray(),s=t.getWidth(),a=t.getHeight(),n=[];let r=0;for(let t=0;t<this._errorQueueSize;t++)n[t]={r:0,g:0,b:0,a:0};yield*Nt(s,a,((t,a)=>{const h=e[t+a*s];let{r:o,g:m,b:u,a:l}=h;for(let t=0;t<this._errorQueueSize;t++){const i=this._weights[t],e=n[(t+r)%this._errorQueueSize];o+=e.r*i,m+=e.g*i,u+=e.b*i,l+=e.a*i}const _=st.createByRGBA(w(o),w(m),w(u),w(l)),c=i.getNearestColor(this._distance,_);r=(r+1)%this._errorQueueSize;const d=(r+this._errorQueueSize-1)%this._errorQueueSize;n[d].r=h.r-c.r,n[d].g=h.g-c.g,n[d].b=h.b-c.b,n[d].a=h.a-c.a,h.from(c)})),yield{pointContainer:t,progress:100}}static _createWeights(t,i){const e=[],s=Math.exp(Math.log(i)/(i-1));for(let a=0,n=1;a<i;a++)e[a]=(n+.5|0)/i*t,n*=s;return e}};o({},{ssim:()=>Ut});var Ht=.01,Lt=.03;function Ut(t,i){if(t.getHeight()!==i.getHeight()||t.getWidth()!==i.getWidth())throw new Error("Images have different sizes!");const e=(255*Ht)**2,s=(255*Lt)**2;let a=0,n=0;return function(t,i,e){const s=t.getWidth(),a=t.getHeight();for(let n=0;n<a;n+=8)for(let r=0;r<s;r+=8){const h=Math.min(8,s-r),o=Math.min(8,a-n),m=Wt(t,r,n,h,o),u=Wt(i,r,n,h,o);e(m,u,Ft(m),Ft(u))}}(t,i,((t,i,r,h)=>{let o=0,m=0,u=0;for(let e=0;e<t.length;e++)m+=(t[e]-r)**2,u+=(i[e]-h)**2,o+=(t[e]-r)*(i[e]-h);const l=t.length-1;m/=l,u/=l,o/=l,n+=(2*r*h+e)*(2*o+s)/((r**2+h**2+e)*(m+u+s)),a++})),n/a}function Wt(t,i,e,s,a){const n=t.getPointArray(),r=[];let h=0;for(let o=e;o<e+a;o++){const e=o*t.getWidth();for(let t=i;t<i+s;t++){const i=n[e+t];r[h]=.2126*i.r+.7152*i.g+.0722*i.b,h++}}return r}function Ft(t){let i=0;for(const e of t)i+=e;return i/t.length}"function"==typeof setImmediate?setImmediate:"undefined"!=typeof process&&(null==process||process.nextTick);const Qt=["Euclidean","Manhattan","CIEDE2000","CIE94Textiles","CIE94GraphicArts","EuclideanBT709NoAlpha","EuclideanBT709","ManhattanBT709","CMetric","PNGQuant","ManhattanNommyde"],Ot=["Nearest","Riemersma","FloydSteinberg","FalseFloydSteinberg","Stucki","Atkinson","Jarvis","Burkes","Sierra","TwoSierra","SierraLite"];function Kt(t,i,e,s){const{width:a,height:n}=t,r=document.createElement("canvas"),h=r.getContext("2d");r.width=5*a,r.height=5*n,h.imageSmoothingEnabled=!1,h.mozImageSmoothingEnabled=!1,h.webkitImageSmoothingEnabled=!1,h.msImageSmoothingEnabled=!1,h.save(),h.scale(5,5),h.drawImage(t,0,0),h.restore(),h.fillStyle=i?"#DDDDDD":"#222222";for(let t=0;t<=a;t+=1){const i=(t+1*e)%10==0?2:1;h.fillRect(5*t,0,i,r.height)}for(let t=0;t<=n;t+=1){const i=(t+1*s)%10==0?2:1;h.fillRect(0,5*t,r.width,i)}return r}function jt(t,i,e,s){const a=document.createElement("canvas");a.width=i,a.height=e;const n=a.getContext("2d"),r=i/t.width,h=e/t.height;if(s)n.save(),n.scale(r,h),n.drawImage(t,0,0),n.restore();else{const s=t.getContext("2d").getImageData(0,0,t.width,t.height),a=n.createImageData(i,e),{data:o}=s,{data:m}=a;for(let s=0;s<e;s+=1)for(let e=0;e<i;e+=1){let a=4*(Math.round(e/r)+Math.round(s/h)*t.width),n=4*(e+s*i);m[n++]=o[a++],m[n++]=o[a++],m[n++]=o[a++],m[n]=o[a]}n.putImageData(a,0,0)}return a}function Xt(t,i,e){return function(t,i,e){const s=e.strategy||"Nearest",a=e.colorDist||"Euclidean";return new Promise(((n,r)=>{const h=new ht.Palette;h.add(ht.Point.createByRGBA(0,0,0,0));for(let i=0;i<t.length;i+=1){const[e,s,a]=t[i],n=ht.Point.createByRGBA(e,s,a,255);h.add(n)}let o,m;switch(a){case"Euclidean":default:o=new H.Euclidean;break;case"Manhattan":o=new H.Manhattan;break;case"CIEDE2000":o=new H.CIEDE2000;break;case"CIE94Textiles":o=new H.CIE94Textiles;break;case"CIE94GraphicArts":o=new H.CIE94GraphicArts;break;case"EuclideanBT709NoAlpha":o=new H.EuclideanBT709NoAlpha;break;case"EuclideanBT709":o=new H.EuclideanBT709;break;case"ManhattanBT709":o=new H.ManhattanBT709;break;case"CMetric":o=new H.CMetric;break;case"PNGQuant":o=new H.PNGQuant;break;case"ManhattanNommyde":o=new H.ManhattanNommyde}if(o._setDefaults&&o._setDefaults(),"Nearest"===s)m=new Ct.NearestColor(o);else if("Riemersma"===s)m=new Ct.ErrorDiffusionRiemersma(o);else{let t=0;if(e.hasOwnProperty("minColorDistance")){const i=Number(e.minColorDistance);Number.isNaN(i)||(t=i/100*.2)}m=new Ct.ErrorDiffusionArray(o,Ct.ErrorDiffusionArrayKernel[s],!e.hasOwnProperty("serpentine")||e.serpentine,t,!!e.GIMPerror)}const u=m.quantize(i,h),l=()=>{try{const t=u.next();t.done?n(function(t){const i=t.getWidth(),e=t.getHeight(),s=t.toUint8Array(),a=document.createElement("canvas");a.width=i,a.height=e;const n=a.getContext("2d"),r=n.createImageData(i,e);return r.data.set(s),n.putImageData(r,0,0),a}(i)):(t.value.pointContainer&&(i=t.value.pointContainer),e.onProgress&&e.onProgress(Math.floor(25+3*t.value.progress/4)),setTimeout(l,0))}catch(t){r(t)}};setTimeout(l,0)}))}(t,ht.PointContainer.fromHTMLCanvasElement(i),e)}var $t=e(875);var Yt,Vt,Jt,Zt=e(917);function ti(t,i,e,s){Jt||(Jt="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=t&&t.defaultProps,n=arguments.length-3;if(i||0===n||(i={children:void 0}),1===n)i.children=s;else if(n>1){for(var r=new Array(n),h=0;h<n;h++)r[h]=arguments[h+3];i.children=r}if(i&&a)for(var o in a)void 0===i[o]&&(i[o]=a[o]);else i||(i=a||{});return{$$typeof:Jt,type:t,key:void 0===e?null:""+e,ref:null,props:i,_owner:null}}function ii(){document.getElementById("imgoutput").toBlob((t=>r()(t,"ppfunconvert.png")))}let ei=null,si=!1;const ai=function(){const[t,i,e]=(0,a.v9)((t=>[t.canvas.canvasId,t.canvas.canvases,t.gui.easterEgg]),a.wU),[n,h]=(0,s.useState)(t),[o,m]=(0,s.useState)(null),[u,l]=(0,s.useState)("Nearest"),[_,c]=(0,s.useState)("Euclidean"),[d,g]=(0,s.useState)(!0),[p,M]=(0,s.useState)({serpentine:!0,minColorDistance:0,GIMPerror:!1}),[b,f]=(0,s.useState)({enabled:!1,width:10,height:10,aa:!0}),[x,w]=(0,s.useState)({enabled:!1,light:!1,offsetX:0,offsetY:0}),[y,S]=(0,s.useState)(!1),[k,v]=(0,s.useState)(!1),[A,B]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(o){const t=i[n];!async function(t){if(t.imgCanvas&&(ei=t,!si)){for(si=!0;ei;){const{colors:t,imgCanvas:i,ditherOpts:e,grid:s,scaling:a}=ei;if(ei=null,i){let n=i;if(a.enabled){const{width:t,height:e,aa:s}=a;n=jt(i,t,e,s)}const r=document.getElementById("qprog");if(r.innerText="Loading...",n=await Xt(t,n,{...e,onProgress:t=>{r.innerText=`Loading... ${Math.round(t)} %`}}),r.innerText="Done",s.enabled){const{light:t,offsetX:i,offsetY:e}=s;n=Kt(n,t,i,e)}const h=document.getElementById("imgoutput");h.width=n.width,h.height=n.height,h.getContext("2d").drawImage(n,0,0)}}si=!1}}({colors:t.cli?t.colors.slice(t.cli):t.colors,imgCanvas:o,ditherOpts:{strategy:u,colorDist:_,...p},grid:x,scaling:b})}}),[n,o,u,_,p,b,x,i]);const{serpentine:z,minColorDistance:E,GIMPerror:C}=p,{enabled:I,light:P,offsetX:R,offsetY:D}=x,{enabled:N,width:G,height:T,aa:q}=b,H="Nearest"!==u&&"Riemersma"!==u;(0,s.useEffect)((()=>{H&&setTimeout((()=>S(!0)),10)}),[H]),(0,s.useEffect)((()=>{I&&setTimeout((()=>v(!0)),10)}),[I]),(0,s.useEffect)((()=>{N&&setTimeout((()=>B(!0)),10)}),[N]);const L=Yt||(Yt=ti("a",{href:"https://www.gimp.org"},void 0,"GIMP"));return ti("div",{className:"content"},void 0,ti("div",{},void 0,"Ընտրեք կտավ",": ",ti("select",{value:n,onChange:t=>{const i=t.target;h(i.options[i.selectedIndex].value)}},void 0,Object.keys(i).map((t=>i[t].v||i[t].hid&&!e?null:ti("option",{value:t},t,i[t].title))))),ti("h3",{},void 0,"Ներկապնակի ներբեռնում"),ti("div",{},void 0,["Ներկապնակ ",L," - ի համար"],": ",ti("button",{type:"button",style:{display:"inline"},onClick:()=>{const t=i[n],{title:e,desc:s,colors:a,cli:h=0}=t;r()(function(t,i,e){let s=`GIMP Palette\n#Palette Name: Pixelplanet${t}\n#Description: ${i}\n#Colors: ${e.length}`;return e.forEach((t=>{s+="\n",t.forEach((t=>{s+=function(t){let i=`${t} `;return t<10?i+="  ":t<100&&(i+=" "),i}(t)})),s+=function(t){let i=" #";return t.forEach((t=>{t<16&&(i+="0"),i+=t.toString(16)})),i}(t)})),s}(e,s,a.slice(h)),`Pixelplanet${e}.gpl`)}},void 0,"Download")),ti("h3",{},void 0,"Պատկերի փոխարկիչ"),ti("p",{},void 0,"Պատկերը փոխեք կտավի գույներով"),ti("input",{type:"file",id:"imgfile",onChange:async t=>{const i=t.target,e=i.files&&i.files[0]?i.files[0]:null,s=await(0,$t.NE)(e);m(null),f({enabled:!1,width:s.width,height:s.height,aa:!0}),m(s)}}),ti("p",{},void 0,"Ընտրեք ռազմավարությունը",": ",ti("select",{value:u,onChange:t=>{const i=t.target;l(i.options[i.selectedIndex].value)}},void 0,Ot.map((t=>ti("option",{value:t},t,t))))),(H||y)&&ti("div",{className:H&&y?"convBox show":"convBox",onTransitionEnd:()=>{H||S(!1)}},void 0,ti("p",{style:{fontHeight:16}},void 0,ti("input",{type:"checkbox",checked:z,onChange:t=>{M({...p,serpentine:t.target.checked})}}),"Օձային"),ti("span",{},void 0,"Նվազագույն գույների հեռավորություն",": ",ti("input",{type:"number",step:"1",min:"0",max:"100",style:{width:"4em"},value:E,onChange:t=>{M({...p,minColorDistance:t.target.value})}})," "),ti("p",{style:{fontHeight:16}},void 0,ti("input",{type:"checkbox",checked:C,onChange:t=>{M({...p,GIMPerror:t.target.checked})}}),"Հաշվել որպես GIMP")),ti("p",{},void 0,"Ընտրեք գունային ռեժիմ",": ",ti("select",{value:_,onChange:t=>{const i=t.target;c(i.options[i.selectedIndex].value)}},void 0,Qt.map((t=>ti("option",{value:t},t,t))))),ti("p",{style:{fontHeight:16}},void 0,ti("input",{type:"checkbox",checked:I,onChange:t=>{w({...x,enabled:t.target.checked})}}),"Ավելացնել ցանց (ապանշեք, եթե ձեզ հարկավոր է 1: 1 ձևանմուշը)"),(I||k)&&ti("div",{className:I&&k?"convBox show":"convBox",onTransitionEnd:()=>{I||v(!1)}},void 0,ti("p",{style:{fontHeight:16}},void 0,ti("input",{type:"checkbox",checked:P,onChange:t=>{w({...x,light:t.target.checked})}}),"Լուսավոր ցանց"),ti("span",{},void 0,"Փոխհատուցել"," X: ",ti("input",{type:"number",step:"1",min:"0",max:"10",style:{width:"2em"},value:R,onChange:t=>{w({...x,offsetX:t.target.value})}})," "),ti("span",{},void 0,"Փոխհատուցել"," Y: ",ti("input",{type:"number",step:"1",min:"0",max:"10",style:{width:"2em"},value:D,onChange:t=>{w({...x,offsetY:t.target.value})}}))),ti("p",{style:{fontHeight:16}},void 0,ti("input",{type:"checkbox",checked:N,onChange:t=>{f({...b,enabled:t.target.checked})}}),"Փոխել պատկերի չափը"),(N||A)&&ti("div",{className:N&&A?"convBox show":"convBox",onTransitionEnd:()=>{N||B(!1)}},void 0,ti("span",{},void 0,"Լայնություն",": ",ti("input",{type:"number",step:"1",min:"1",max:"1024",style:{width:"3em"},value:G,onChange:t=>{const i=t.target.value>1024?1024:t.target.value;if(i)if(d&&o){const t=o.width/o.height,e=Math.round(i/t);if(e<=0)return;f({...b,width:i,height:e})}else f({...b,width:i})}})," "),ti("span",{},void 0,"Բարձրություն",": ",ti("input",{type:"number",step:"1",min:"1",max:"1024",style:{width:"3em"},value:T,onChange:t=>{const i=t.target.value>1024?1024:t.target.value;if(i)if(d&&o){const t=o.width/o.height,e=Math.round(t*i);if(e<=0)return;f({...b,width:e,height:i})}else f({...b,height:i})}})),ti("p",{style:{fontHeight:16}},void 0,ti("input",{type:"checkbox",checked:d,onChange:t=>{g(t.target.checked)}}),"Պահպանել հարաբերակցությունը"),ti("p",{style:{fontHeight:16}},void 0,ti("input",{type:"checkbox",checked:q,onChange:t=>{f({...b,aa:t.target.checked})}}),"Հակասել"),ti("button",{type:"button",onClick:()=>{o&&f({...b,width:o.width,height:o.height})}},void 0,"Վերակայել")),o?ti("div",{},void 0,Vt||(Vt=ti("p",{id:"qprog"},void 0,"...")),ti("p",{},void 0,ti("canvas",{id:"imgoutput",style:{width:"80%",imageRendering:"crisp-edges"}})),ti("button",{type:"button",onClick:ii},void 0,"Ներբեռնել ձևանմուշը"),"undefined"==typeof ClipboardItem?null:ti("button",{type:"button",onClick:()=>{const t=document.getElementById("imgoutput");(0,Zt.w)(t)}},void 0,"Պատճենեք սեղմատախտակին")):null)}}}]);